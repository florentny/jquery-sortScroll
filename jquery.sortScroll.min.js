!function(a,b,c,d){"use strict";function f(b,c){this.container=a(b),this.settings=a.extend({},e,c,this.container.data()),this._sorting=!1,this.elementClass="sort-scroll-element",this.sortingClass="sort-scroll-sorting",this.buttonUpClass="sort-scroll-button-up",this.buttonDownClass="sort-scroll-button-down",this.init()}var e={animationDuration:1e3,easing:"swing",keepStill:!0};a.extend(f.prototype,{init:function(){var b=this;b.container.on("click","."+b.buttonUpClass+", ."+b.buttonDownClass,function(c){var g,d=a(this),e=b.container.find("."+b.elementClass),f=e.index(d.closest("."+b.elementClass));g=d.hasClass(b.buttonUpClass)?-1:1,c.preventDefault(),b.sortElement(f,g,b.settings.keepStill)})},sortElement:function(d,e,f){e=-1===e?e:1,f=f?this.settings.keepStill:!1;var g=this,h=g.container.find("."+g.elementClass),i=h.length-1,j=d+e;if(0>j||j>i)return!1;var k=h.eq(d);if(g._sorting)return g.container.one("sortScroll.sortEnd",function(a,b,c,d){g.sortElement(d,e,f)}),!1;g.container.trigger("sortScroll.sortStart",[k,d,j]),g._sorting=!0;var l=k.outerHeight(!0),m=k.offset().top,n=h.eq(j),o=n.outerHeight(!0),p=n.offset().top,q=n.offset().top,r=p+l,s=Math.max(0,c.documentElement.scrollHeight-c.documentElement.clientHeight),t=a(b).scrollTop(),u=0,v=parseInt(n.css("margin-top"),10);e>0&&(q=m+o,r=m,u=parseInt(k.css("margin-top"),10),v=0);var w=q-m-u,x=r-p-v,y=t+w;y=Math.min(y,s),y=Math.max(y,0);var D,z=g.settings.animationDuration,A=g.settings.easing,B=k.css("position"),C=k.css("z-index");D="auto"===C?2:C+1,k.addClass(g.sortingClass),k.css({position:"relative","z-index":D}),n.css({position:"relative"}),k.animate({top:w+"px"},z,A),n.animate({top:x+"px"},z,A),f&&a("html, body").animate({scrollTop:y+"px"},z,A),h.add(a("html, body")).promise().done(function(){k.removeClass(g.sortingClass),k.css({position:B,"z-index":C}),n.css({position:B}),e>0?n.after(k):n.before(k),k.css("top",0),n.css("top",0),g._sorting=!1,g.container.trigger("sortScroll.sortEnd",[k,d,j])})}}),a.fn.sortScroll=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("sortScroll");e?"string"==typeof b&&e[b].apply(e,c):d.data("sortScroll",new f(this,b))})},a(".sort-scroll-container").each(function(){a(this).sortScroll()})}(jQuery,window,document);